import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import CodeBlock from "@theme/CodeBlock";

import JsFinalize from "!!raw-loader!./js/finalize.js";

import ReactFinalize from "!!raw-loader!./react/finalize.js";

import SwiftFinalize from "!!raw-loader!./swift/finalize.swift";

import VueFinalize from "!!raw-loader!./vue/finalize.js";

import JavaFinalize from "!!raw-loader!./java/finalize.java";

import GoFinalize from "!!raw-loader!./go/finalize.go";

import DotNetFinalize from "!!raw-loader!./dotnet/finalize.cs";

import PHPFinalize from "!!raw-loader!./php/finalize.php";

import RubyFinalize from "!!raw-loader!./ruby/finalize.rb";

import FlutterFinalize from "!!raw-loader!./flutter/finalize.dart";

<Tabs groupId="language">

<TabItem value="js" label="Javascript">

Call the `context.finalize()` method before letting a process using the SDK exit, as
this method gracefully shuts down the SDK by clearing caches, and closing
connections. It will also call `context.publish()` to flush the remaining
unpublished impressions.

<CodeBlock language="js">{JsFinalize}</CodeBlock>

:::caution
After `finalize()` is called and finishes, any subsequent invocations to the
`treatment()` method will still return the right variant, but will result in a
warning to let you know that you might be losing impressions.
:::

</TabItem>

<TabItem value="react" label="React">

Call the `context.finalize()` method before letting a process using the SDK exit, as
this method gracefully shuts down the SDK by clearing caches, and closing
connections. It will also call `context.publish()` to flush the remaining
unpublished impressions.

<CodeBlock language="jsx">{ReactFinalize}</CodeBlock>

:::caution
After `finalize()` is called and finishes, any subsequent invocations to the
`treatment()` method will still return the right variant, but will result in a
warning to let you know that you might be losing impressions.
:::

</TabItem>

<TabItem value="swift" label="Swift">

The `close()` methods will ensure all events have been published to the A/B
Smartly collector, like `publish()`, and will also "seal" the context,
throwing an error if any method that could generate an event is called.

<CodeBlock language="swift">{SwiftFinalize}</CodeBlock>

</TabItem>

<TabItem value="vue" label="Vue2">

The `finalize()` method will ensure all events have been published to the A/B
Smartly collector, like `publish()`, and will also "seal" the context,
throwing an error if any method that could generate an event is called.

<CodeBlock language="js">{VueFinalize}</CodeBlock>

</TabItem>

<TabItem value="vue3" label="Vue3">

The `finalize()` method will ensure all events have been published to the A/B
Smartly collector, like `publish()`, and will also "seal" the context,
throwing an error if any method that could generate an event is called.

<CodeBlock language="js">{VueFinalize}</CodeBlock>

</TabItem>

<TabItem value="java" label="Java">

The `close()` and `closeAsync()` methods will ensure all events have been
published to the A/B Smartly collector, like `publish()`, and will also "seal"
the context, throwing an error if any method that could generate an event is
called.

<CodeBlock language="java">{JavaFinalize}</CodeBlock>

</TabItem>

<TabItem value="go" label="Go">

The `Close()` and `CloseAsync()` methods will ensure all events have been
published to the A/B Smartly collector, like `Publish()`, and will also "seal"
the context, throwing an error if any method that could generate an event is
called.

<CodeBlock language="go">{GoFinalize}</CodeBlock>

</TabItem>

<TabItem value="dotnet" label=".NET">

The A/B Smartly Context implements `IDisposable` and `IAsyncDisposable` interfaces to ensure
that all events have been published to the A/B Smartly collector, like `Publish()`,
and the context has been "sealed". An error will then be thrown if any method that
could generate an event is called.

To implement this, instead of calling `Publish()` directly, the `using` pattern can be used.

<CodeBlock language="csharp">{DotNetFinalize}</CodeBlock>

</TabItem>

<TabItem value="php" label="PHP">

The `close()` method will ensure all events have been published to the A/B
Smartly collector, like `Context->publish()`, and will also "seal" the context,
throwing an error if any method that could generate an event is called.

<CodeBlock language="php">{PHPFinalize}</CodeBlock>

</TabItem>

<TabItem value="ruby" label="Ruby">

The `close()` method will ensure all events have been published to the A/B
Smartly collector, like `publish()`, and will also "seal" the context, throwing
an error if any method that could generate an event is called.

<CodeBlock language="ruby">{RubyFinalize}</CodeBlock>

</TabItem>

<TabItem value="flutter" label="Flutter">

The `close()` method will ensure all events have been published to the A/B
Smartly collector, like `publish()`, and will also "seal" the context, throwing
an error if any method that could generate an event is called.

<CodeBlock language="dart">{FlutterFinalize}</CodeBlock>

</TabItem>

</Tabs>
