import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";
import CodeBlock from "@theme/CodeBlock";

import JsImport from "!!raw-loader!./js/import.js";

import ReactImport from "!!raw-loader!./react/import.jsx";

import SwiftImport from "!!raw-loader!./swift/import.swift";

import VueImport from "!!raw-loader!./vue/import.js";

import JavaImport from "!!raw-loader!./java/import.java";
import JavaImportAndroid6 from "!!raw-loader!./java/importForAndroid6.java";

import GoImport from "!!raw-loader!./go/initialize.go";

import DotNetStartupCode from "!!raw-loader!./dotnet/startupCode.cs";
import DotNetSDKInjection from "!!raw-loader!./dotnet/sdkInjection.cs";
import DotNetManualSDKInstance from "!!raw-loader!./dotnet/manualSDKInstance.cs";

Once the SDK is installed, it can be initialized in your project.

<Tabs groupId="language">

<TabItem value="js" label="Javascript">

<CodeBlock language="js">{JsImport}</CodeBlock>

</TabItem>

<TabItem value="react" label="React">

<CodeBlock language="jsx" title="src/index.js">
  {ReactImport}
</CodeBlock>

</TabItem>

<TabItem value="swift" label="Swift">

<CodeBlock language="swift">{SwiftImport}</CodeBlock>

</TabItem>

<TabItem value="vue" label="Vue2">

<CodeBlock language="js">{VueImport}</CodeBlock>

This makes the `$absmartly` extension available in every Vue instance.

</TabItem>

<TabItem value="java" label="Java">

<CodeBlock language="java">{JavaImport}</CodeBlock>

:::caution Android 6.0 or Earlier
When targeting Android 6.0 or earlier, set the default Java Security Provider
for SSL to Conscrypt by creating the Client instance as follows:

<CodeBlock language="java">{JavaImportAndroid6}</CodeBlock>
:::

</TabItem>

<TabItem value="go" label="Go">

<CodeBlock language="go">{GoImport}</CodeBlock>

</TabItem>

<TabItem value="dotnet" label=".NET">

Following examples assume an Api Key, an Application, and an Environment have been created in the A/B Smartly web console.

Given that project uses .NET dependency injection, the default setup for the SDK can be used:

<CodeBlock language="csharp">{DotNetStartupCode}</CodeBlock>

```json title="appsettings.json"
{
  "ABSmartly": {
    "Environment": "development",
    "Application": "website",
    "Endpoint": "https://your-company.absmartly.io/v1",
    "ApiKey": "YOUR-API-KEY"
  }
}
```

ABSdk instance is added as a singleton then, and can be injected at usage places:

<CodeBlock language="csharp">{DotNetSDKInjection}</CodeBlock>

AddABSmartly extension method allows to configure SDK settings, HTTP connection settings,
inject custom implementation if context-specific services, and also configure additional
HTTP requests policies using Polly.

Alternatively, SDK instance can be created manually like in the following
example.

<CodeBlock language="csharp">{DotNetManualSDKInstance}</CodeBlock>

SDK uses IHttpClientFactory abstraction to effectively manage HTTP
connections pool. This factory is injected using IABSdkHttpClientFactory
as seen in the example above. In case custom behavior or implementation
is required, inject own implementation of either IHttpClientFactory or
IABSdkHttpClientFactory.
In case of injecting IABSdkHttpClientFactory implementation make sure it
creates named IHttpClient instances with name `ABSmartlySDK.HttpClient`
(you can use static field in ABSdk class, `ABSdk.HttpClientName`).

</TabItem>

</Tabs>

**SDK Options**

| Config      | Type                                 | Required? |                 Default                 | Description                                                                                                                                                                   |
| :---------- | :----------------------------------- | :-------: | :-------------------------------------: | :---------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| endpoint    | `string`                             |  &#9989;  |               `undefined`               | The URL to your API endpoint. Most commonly `"your-company.absmartly.io"`                                                                                                     |
| apiKey      | `string`                             |  &#9989;  |               `undefined`               | Your API key which can be found on the Web Console.                                                                                                                           |
| environment | `"production"` or `"development"`    |  &#9989;  |               `undefined`               | The environment of the platform where the SDK is installed. Environments are created on the Web Console and should match the available environments in your infrastructure.   |
| application | `string`                             |  &#9989;  |               `undefined`               | The name of the application where the SDK is installed. Applications are created on the Web Console and should match the applications where your experiments will be running. |
| retries     | `number`                             | &#10060;  |                   `5`                   | The number of retries before the SDK stops trying to connect.                                                                                                                 |
| timeout     | `number`                             | &#10060;  |                 `3000`                  | An amount of time, in milliseconds, before the SDK will stop trying to connect.                                                                                               |
| eventLogger | `(context, eventName, data) => void` | &#10060;  | See "Using a Custom Event Logger" below | A callback function which runs after SDK events.                                                                                                                              |
