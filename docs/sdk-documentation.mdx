---
sidebar_position: 1
---

import Tabs from "@theme/Tabs";
import TabItem from "@theme/TabItem";

import Install from "./sdk-documentation/getting-started/install/_install.mdx";
import ImportAndInitialize from "./sdk-documentation/getting-started/import-and-initialize/_import-and-initialize.mdx";
import CreateNewContextRequest from "./sdk-documentation/getting-started/create-new-context-request/_create-new-context-request.mdx";
import SettingContextAttributes from "./sdk-documentation/getting-started/setting-context-attributes/_setting-context-attributes.mdx";

import SelectingATreatment from "./sdk-documentation/basic-usage/selecting-a-treatment/_selecting-a-treatment.mdx";
import SelectingAVariable from "./sdk-documentation/basic-usage/selecting-a-variable/_selecting-a-variable.mdx";

import ConfigApi from "./sdk-documentation/config-api/_config-api.mdx";
import ConfigApiBasicExample from "./sdk-documentation/config-api-basic-example/_config-api-basic-example.mdx";

import TranslationsExample from "./sdk-documentation/translations-example/_translations-example.mdx";

import Publish from "./sdk-documentation/publish/_publish.mdx";

import Finalize from "./sdk-documentation/finalize/_finalize.mdx";

import Attributes from "./sdk-documentation/attributes/_attributes.mdx";

import TrackingGoals from "./sdk-documentation/tracking-goals/_tracking-goals.mdx";

# SDK Documentation

This guide provides detailed information about A/B Smartly’s SDKs. We
currently support Javascript, Swift, VueJS &amp; Java.

Have a look at [our Github](https://github.com/absmartly/) to see our current
SDKs and those which are still in development (here's looking at **you** Ruby
developers)!

---

## Getting Started

This guide assumes that you are already partnered with us and your Web Console
has been setup by our team. If you are looking to start your experimentation
journey, [request a demo](https://absmartly.com/quiz) with one of our
teammembers!

### Install the SDK

<Install />

### Import and Initialize the SDK

<ImportAndInitialize />

### Create a New Context Request

<CreateNewContextRequest />

#### Refreshing the Context with Fresh Experiment Data

For long-running single-page-applications (SPA), the context is usually
created once when the application is first reached. However, any experiments
being tracked in your production code, but started after the context was
created, will not be triggered. To mitigate this, we can use the
refreshInterval option when creating the context.

```js
const request = {
    units: {
        session_id: '5ebf06d8cb5d8137290c4abb64155584fbdb64d8',
    },
};

const context = sdk.createContext(request, {
    refreshInterval: 5 _ 60 _ 1000
});
```

Alternatively, the `refresh()` method can be called manually. The `refresh()`
method pulls updated experiment data from the A/B Smartly collector and will
trigger recently started experiments when `treatment()` is called again.

```js
setTimeout(async () => {
    try {
        context.refresh();
    } catch(error) {
        console.error(error);
    }
}, 5 _ 60 _ 1000);
```

#### HTTP request timeout

It is possible to set a timeout per individual HTTP request, overriding the
global timeout set for all request when instantiating the SDK object.

Here is an example of setting a timeout only for the `createContext` request.

```js
const context = sdk.createContext(
  request,
  {
    refreshInterval: 5 * 60 * 1000,
  },
  {
    timeout: 1500,
  }
);
```

#### HTTP Request cancellation

Sometimes it is useful to cancel an inflight HTTP request, for example, when
the user is navigating away. The A/B Smartly SDK also supports a cancellation
via an `AbortSignal`. An implementation of AbortController is provided for older
platforms, but will use the native implementation where available.

Here is an example of a cancellation scenario.

```js
const controller = new absmartly.AbortController();
const context = sdk.createContext(
  request,
  {
    refreshInterval: 5 * 60 * 1000,
  },
  {
    signal: controller.signal,
  }
);

// abort request if not ready after 1500ms
const timeoutId = setTimeout(() => controller.abort(), 1500);

await context.ready();

clearTimeout(timeoutId);
```

## Basic Usage

After the init call, all the variants for all running experiments will be
cached in memory. The init call should take a single-digit number of milliseconds on the
server side. On the client side, it may take a little longer (it’s another
roundtrip to the server) unless you pass the data directly in the HTML which
makes it ready immediately. Any experiment that is evaluated and is not
running will return Variant 0 (the control group).

### Selecting a Treatment

<SelectingATreatment />

### Treatment Variables

<SelectingAVariable />

### Peek at treatment variants

Although generally not recommended, it is sometimes necessary to peek at a
treatment without triggering an exposure. The A/B Smartly SDK provides a
`peek()` method for that.

```js
if (context.peek("exp_test_experiment") == 0) {
  // user is in control group (variant 0)
} else {
  // user is in treatment group
}
```

### Overriding treatment variants

During development, for example, it is useful to force a treatment for an
experiment. This can be achieved with the `override()` and/or `overrides()`
methods. The `override()` and `overrides()` methods can be called before the context is
ready.

```js
context.override("exp_test_experiment", 1); // force variant 1 of treatment
context.overrides({
  exp_test_experiment: 1,
  exp_another_experiment: 0,
});
```

## Context Attributes

<SettingContextAttributes />

## Config API

<ConfigApi />

### Basic Example

<ConfigApiBasicExample />

### Translations Example

<TranslationsExample />

## Publish

<Publish />

## Finalize

<Finalize />

## Tracking Goals

<TrackingGoals />
